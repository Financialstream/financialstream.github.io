const i18n = {
  en: {
    nav: { services: "Services", process: "Process", faq: "FAQ", contact: "Contact" },
    cta: {
      bookTop: "Book a Free Consultation",
      bookHero: "Book a Free Consultation",
      seeServices: "See services",
      sendRequest: "Send Request",
      bookMid: "Book a Free Consultation",
      bookProcess: "Book a Free Consultation",
      bookFooter: "Book a Free Consultation"
    },
    hero: {
      pill: "Bilingual: English / Russian",
      title1: "Accounting & Bookkeeping",
      title2: "for Small Businesses & Individuals",
      subtitle: "Monthly bookkeeping, tax preparation, and clean reporting — built for clarity, not chaos.",
      body: "We provide reliable bookkeeping, tax preparation, and financial support for small businesses and individuals across the United States. Our goal is to keep your finances accurate, organized, and compliant \u2014 without stress or confusion. Whether you are running a business, working as a freelancer, or managing personal taxes, we help you stay in control and avoid costly mistakes. You get clear reports, timely filings, and responsive support, so you can focus on your work while we handle the numbers. Start with a free consultation to understand your situation and the best next steps.",
      chip1: "Fast response",
      chip2: "Clean monthly reports",
      chip3: "US small-business focused"
    },
    panel: {
      title: "Book a Free Consultation",
      desc: "Ask a question or request a free consultation — we’ll get back to you shortly.",
      callText: "(Call / Text)"
    },
    services: {
      title: "Our Services",
      subtitle: "Clear scope. Clean deliverables. No surprises.",
      s1: { title: "Bookkeeping", text: "Monthly bookkeeping, reconciliation, and organized records." },
      s2: { title: "Tax Preparation", text: "Individual and small-business tax filing with deduction support." },
      s3: { title: "Payroll / Sales Tax", text: "Payroll processing and sales tax compliance, done on time." },
      s4: { title: "Financial Reporting", text: "Simple, readable monthly reports to guide decisions." },
      s5: { title: "LLC / Business Setup", text: "Guidance on setup, basics, and ongoing compliance hygiene." },
      cta: { title: "Not sure what you need?", text: "Book a free call — we’ll clarify scope and next steps." }
    },
    process: {
      title: "How it works",
      subtitle: "A simple flow that keeps finances under control.",
      p1: { title: "Free consultation", text: "We understand your situation and confirm scope." },
      p2: { title: "Secure onboarding", text: "We collect access and documents with clear instructions." },
      p3: { title: "Monthly close", text: "Reconciliations and cleanup — consistent and on time." },
      p4: { title: "Reports & support", text: "You get clear reports plus quick answers when needed." }
    },
    faq: {
      title: "FAQ",
      subtitle: "Common questions — quick answers.",
      q1: { q: "Do you work with both individuals and businesses?", a: "Yes — individuals, freelancers, and small businesses." },
      q2: { q: "Do you support English and Russian?", a: "Yes. We’re bilingual (EN/RU)." },
      q3: { q: "How fast do you respond?", a: "Typically same day or within 24 hours on business days." }
    },
    contact: {
      title: "Contact",
      subtitle: "Ask a question or request a free consultation — we’ll reply shortly.",
      phone: "Phone",
      email: "Email",
      website: "Website",
      formTitle: "Book a Free Consultation"
    },
    form: {
      name: "Your Name",
      phone: "Phone Number",
      email: "Email",
      message: "Message",
      note: "Note: This demo site uses an email draft fallback. To receive submissions automatically, connect a form service (Formspree/Netlify) — instructions included in README."
    }
  },
  ru: {
    nav: { services: "Услуги", process: "Процесс", faq: "FAQ", contact: "Контакты" },
    cta: {
      bookTop: "Записаться на бесплатную консультацию",
      bookHero: "Записаться на бесплатную консультацию",
      seeServices: "Посмотреть услуги",
      sendRequest: "Отправить",
      bookMid: "Записаться на бесплатную консультацию",
      bookProcess: "Записаться на бесплатную консультацию",
      bookFooter: "Записаться на бесплатную консультацию"
    },
    hero: {
      pill: "Двуязычно: Английский / Русский",
      title1: "Бухгалтерия и учёт",
      title2: "для малого бизнеса и частных лиц",
      subtitle: "Ежемесячный учёт, подготовка налогов и понятные отчёты — без хаоса.",
      body: "\u041c\u044b \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0431\u0443\u0445\u0433\u0430\u043b\u0442\u0435\u0440\u0441\u043a\u0438\u0439 \u0443\u0447\u0451\u0442, \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0443 \u043d\u0430\u043b\u043e\u0433\u043e\u0432 \u0438 \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432\u0443\u044e \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443 \u0434\u043b\u044f \u043c\u0430\u043b\u043e\u0433\u043e \u0431\u0438\u0437\u043d\u0435\u0441\u0430 \u0438 \u0447\u0430\u0441\u0442\u043d\u044b\u0445 \u043b\u0438\u0446 \u0432 \u0421\u0428\u0410. \u041d\u0430\u0448\u0430 \u0437\u0430\u0434\u0430\u0447\u0430 \u2014 \u0447\u0442\u043e\u0431\u044b \u0432\u0430\u0448\u0438 \u0444\u0438\u043d\u0430\u043d\u0441\u044b \u0431\u044b\u043b\u0438 \u0442\u043e\u0447\u043d\u044b\u043c\u0438, \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c\u0438 \u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u043b\u0438 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c, \u0431\u0435\u0437 \u0441\u0442\u0440\u0435\u0441\u0441\u0430 \u0438 \u043f\u0443\u0442\u0430\u043d\u0438\u0446\u044b. \u0415\u0441\u043b\u0438 \u0432\u044b \u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446 \u0431\u0438\u0437\u043d\u0435\u0441\u0430, \u0444\u0440\u0438\u043b\u0430\u043d\u0441\u0435\u0440 \u0438\u043b\u0438 \u0445\u043e\u0442\u0438\u0442\u0435 \u043d\u0430\u0432\u0435\u0441\u0442\u0438 \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0432 \u043d\u0430\u043b\u043e\u0433\u0430\u0445, \u043c\u044b \u043f\u043e\u043c\u043e\u0436\u0435\u043c \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u043e\u0448\u0438\u0431\u043e\u043a \u0438 \u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0432\u0441\u0451 \u043f\u043e\u0434 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0435\u043c. \u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0435 \u043f\u043e\u043d\u044f\u0442\u043d\u044b\u0435 \u043e\u0442\u0447\u0451\u0442\u044b, \u0441\u0432\u043e\u0435\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e \u043f\u043e\u0434\u0430\u0447\u0443 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0438 \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u0443\u044e \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443, \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0441\u0440\u0435\u0434\u043e\u0442\u043e\u0447\u0438\u0442\u044c\u0441\u044f \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0435, \u043f\u043e\u043a\u0430 \u043c\u044b \u0432\u0435\u0434\u0451\u043c \u0446\u0438\u0444\u0440\u044b. \u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0441 \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e\u0439 \u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u0446\u0438\u0438 \u2014 \u0440\u0430\u0437\u0431\u0435\u0440\u0451\u043c \u0432\u0430\u0448\u0443 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044e \u0438 \u0441\u043e\u0433\u043b\u0430\u0441\u0443\u0435\u043c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0448\u0430\u0433.",
      chip1: "Быстрый ответ",
      chip2: "Понятные ежемесячные отчёты",
      chip3: "Фокус на малом бизнесе США"
    },
    panel: {
      title: "Записаться на бесплатную консультацию",
      desc: "Задать вопрос или записаться на консультацию — мы быстро ответим.",
      callText: "(Звонок / SMS)"
    },
    services: {
      title: "Услуги",
      subtitle: "Чёткий объём работ. Понятный результат.",
      s1: { title: "Бухгалтерский учёт", text: "Ежемесячный учёт, сверки и порядок в документах." },
      s2: { title: "Подготовка налогов", text: "Налоги для частных лиц и малого бизнеса, с учётом вычетов." },
      s3: { title: "Payroll / Sales Tax", text: "Payroll и Sales Tax — вовремя и без сюрпризов." },
      s4: { title: "Финансовые отчёты", text: "Понятные отчёты для контроля и решений." },
      s5: { title: "LLC / Открытие бизнеса", text: "Подскажем по базовой настройке и соблюдению требований." },
      cta: { title: "Не уверены, что нужно?", text: "Запишитесь на бесплатный звонок — уточним задачу и следующий шаг." }
    },
    process: {
      title: "Как мы работаем",
      subtitle: "Простой процесс, чтобы финансы были под контролем.",
      p1: { title: "Бесплатная консультация", text: "Разбираемся в ситуации и согласуем объём работ." },
      p2: { title: "Безопасное подключение", text: "Собираем доступы и документы по понятным инструкциям." },
      p3: { title: "Ежемесячное закрытие", text: "Сверки и порядок — стабильно и вовремя." },
      p4: { title: "Отчёты и поддержка", text: "Вы получаете отчёты и быстрые ответы по вопросам." }
    },
    faq: {
      title: "FAQ",
      subtitle: "Частые вопросы — коротко.",
      q1: { q: "Вы работаете и с частными лицами, и с бизнесом?", a: "Да — частные лица, самозанятые и малый бизнес." },
      q2: { q: "Есть поддержка русского и английского?", a: "Да. Мы работаем на EN/RU." },
      q3: { q: "Как быстро вы отвечаете?", a: "Обычно в тот же день или в течение 24 часов в будни." }
    },
    contact: {
      title: "Контакты",
      subtitle: "Задать вопрос или записаться на консультацию — мы быстро ответим.",
      phone: "Телефон",
      email: "Email",
      website: "Сайт",
      formTitle: "Записаться на бесплатную консультацию"
    },
    form: {
      name: "Ваше имя",
      phone: "Телефон",
      email: "Email",
      message: "Сообщение",
      note: "Примечание: в демо-версии форма делает черновик письма. Для автодоставки заявок на email подключите Formspree/Netlify — инструкция в README."
    }
  }
};

function setLanguage(lang){
  const dict = i18n[lang] || i18n.en;
  document.documentElement.lang = lang;

  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.getAttribute("data-i18n");
    const parts = key.split(".");
    let val = dict;
    for (const p of parts){
      if (val && typeof val === "object" && p in val) val = val[p];
      else { val = null; break; }
    }
    if (typeof val === "string") el.textContent = val;
  });

  document.querySelectorAll(".lang__btn").forEach(btn => {
    const isActive = btn.dataset.lang === lang;
    btn.setAttribute("aria-pressed", isActive ? "true" : "false");
  });

  localStorage.setItem("fs_lang", lang);
}

function hookMailto(formId){
  const form = document.getElementById(formId);
  if (!form) return;
  form.addEventListener("submit", (e) => {
    e.preventDefault();
    const data = new FormData(form);
    const name = (data.get("name") || "").toString().trim();
    const phone = (data.get("phone") || "").toString().trim();
    const email = (data.get("email") || "").toString().trim();
    const message = (data.get("message") || "").toString().trim();

    const lang = localStorage.getItem("fs_lang") || "en";
    const subject = (lang === "ru")
      ? "Запрос консультации — Financial Stream"
      : "Consultation request — Financial Stream";

    const bodyLines = [
      `Name: ${name}`,
      `Phone: ${phone}`,
      `Email: ${email}`,
      "",
      "Message:",
      message
    ];
    const body = encodeURIComponent(bodyLines.join("\n"));
    const mailto = `mailto:financialstreamllc@gmail.com?subject=${encodeURIComponent(subject)}&body=${body}`;
    window.location.href = mailto;
  });
}

document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("year").textContent = new Date().getFullYear();

  const saved = localStorage.getItem("fs_lang");
  setLanguage(saved || "en");

  document.querySelectorAll(".lang__btn").forEach(btn => {
    btn.addEventListener("click", () => setLanguage(btn.dataset.lang));
  });

  hookMailto("leadForm");
  hookMailto("contactForm");
});
