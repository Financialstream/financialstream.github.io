(() => {
  const i18n = {
    en: {
      nav: {
        services: 'Services',
        process: 'Process',
        faq: 'FAQ',
        contact: 'Contact',
      },
      cta: {
        bookTop: 'Book a Free Consultation',
        seeServices: 'See services',
        ctaTitle: 'Ready to get started?',
        ctaText: 'Book a free consultation or send a request — we’ll reply shortly.',
        ctaButton: 'Request a Free Consultation',
        sendRequest: 'Send Request',
        bookFooter: 'Request a Free Consultation',
        bookMid: 'Request a Free Consultation',
      },
      hero: {
        title1: 'Accounting & Bookkeeping',
        title2: 'for Small Businesses & Individuals',
        subtitle: 'Leave your accounting and paperwork to professionals.',
        body: 'Financial Stream LLC helps small businesses and individuals keep clean books, stay compliant, and feel confident in their numbers. We handle monthly bookkeeping in QuickBooks Online, support state revenue and labor agency matters when needed, and prepare and file business and personal tax returns. If you’re starting a business, catching up on backlog, or getting ready for year-end — we’ll organize everything and keep it simple. Most work is done remotely, so you don’t need to visit an office.',
        pillLang: 'Bilingual: English / Russian',
        chip1: 'Fast response',
        chip2: 'Clean monthly reports',
        chip3: 'QuickBooks-focused',
      },
      pill: {
        lang: 'Bilingual: English / Russian',
      },
      badges: {
        response: 'Fast response',
        reports: 'Clean monthly reports',
        us: 'US small-business focused',
      },
      services: {
        title: 'Our Services',
        subtitle: 'We do our work fast, high-quality, and professionally.',
        s1: { b1: 'Company registration / closure', b2: 'EIN application', b3: 'Business license', b4: 'Contractor license' },
        s2: { b1: 'Bookkeeping in QuickBooks (QB). Professional monthly categorization.' },
        s3: { b1: 'Monthly and quarterly reporting to the Department of Revenue, sales tax filing.' },
        s4: { b1: "Payroll calculation and quarterly reporting to the Department of Labor & Industries (L&I)" },
        s5: { b1: 'Preparation and filing of tax returns for businesses and individuals.' },
        s6: { b1: 'Financial analysis and consultation on financial matters and documents.' },
      },
      monthly: {
        title: 'What you get each month',
        b1: 'Reconciled bank & credit card accounts',
        b2: 'Clean categorization in QuickBooks Online',
        b3: 'Monthly P&L and Balance Sheet',
        b4: 'Clear notes on what changed and what to watch',
        b5: 'Fast answers to bookkeeping questions',
      },
      process: {
        title: 'How it works',
        subtitle: 'A simple flow that keeps finances under control.',
        p1: {
          title: 'Free consultation',
          text: 'We understand your situation and confirm scope.',
        },
        p2: {
          title: 'Secure onboarding',
          text: 'We collect access and documents with clear instructions.',
        },
        p3: {
          title: 'Monthly close',
          text: 'Reconciliations and cleanup — consistent and on time.',
        },
      },
      reviews: {
        title: 'Client reviews',
        subtitle: 'Clients across the U.S. — here are a few short notes.',
        r1: { text: '“Clear, fast, and accurate. We finally have clean monthly reports.”', name: 'Alex' },
        r2: { text: '“Great communication and everything is organized. Highly recommend.”', name: 'Olga' },
        r3: { text: '“They helped me fix issues from the previous bookkeeper and set everything up correctly.”', name: 'Svetlana' },
        r4: { text: '“Professional service and quick answers — exactly what a small business needs.”', name: 'Viktor' },
        r5: { text: '“Very attentive approach. Everything is on time and stress‑free.”', name: 'Tetiana' },
      },
      faq: {
        title: 'FAQ',
        subtitle: 'Answers to common questions.',
        q1: { q: 'What do you need from me to get started?', a: 'We’ll ask a few questions and request access to your bookkeeping platform and key documents.' },
        q2: { q: 'Do I need to come to your office in person?', a: 'No. We can work fully online or by phone, so you don’t need to visit an office. We support clients across the U.S.' },
        q3: { q: 'Do you work with QuickBooks Online?', a: 'Yes. QuickBooks Online is our primary platform, and we can help you set it up correctly.' },
        q4: { q: 'Can you clean up months of backlog?', a: 'Yes. We can catch up past months, fix categorization, and move you into a stable monthly process.' },
        q5: { q: 'Do you help with sales tax?', a: 'Yes. We support sales tax tracking, filings, and notices for your state.' },
        q6: { q: 'Do you help with state revenue and labor agencies?', a: 'Yes. We can help with reporting, notices, documentation, and communication so you stay compliant.' },
        q7: { q: 'Do you do taxes?', a: 'Yes. We prepare and file business and personal tax returns and help you keep documentation organized year-round.' },
        q8: { q: 'How fast do you respond?', a: 'Typically within 1 business day. Complex cases may take longer — we’ll keep you updated.' },
        q9: { q: 'How much does it cost?', a: 'Pricing depends on volume and complexity. We’ll provide a quote after a short call.' },
      },
      contact: {
        title: 'Contact',
        subtitle: 'Tell us what you need — we’ll reply shortly.',
        formTitle: 'Book a free consultation or ask a question',
        formSub: 'We’ll review your situation, ask a few quick questions, and suggest the next step.',
        phone: 'Phone',
        email: 'Email',
        website: 'Website',
      
        location: 'Location',
        locationValue: 'Virtually serving clients across the U.S. Based out of Federal Way, Washington.',},
      form: {
        success: 'Thank you — your request was sent.',
        nameLabel: 'Your Name',
        phoneLabel: 'Phone Number',
        emailLabel: 'Email',
        messageLabel: 'Message',
        namePlaceholder: 'Your Name',
        phonePlaceholder: 'Phone Number',
        emailPlaceholder: 'Email',
        messagePlaceholder: 'How can we help?',
        thanksTitle: 'Thank you!',
        thanksBody: 'Your request has been sent. We will contact you shortly.',
      },
      
      policyPrivacy: {
        metaTitle: 'Privacy Policy — Financial Stream LLC',
        h1: 'Privacy Policy',
        updated: 'Last updated: 2026-02-08',
        intro: 'Financial Stream LLC respects your privacy. This Privacy Policy explains what information we collect, how we use it, and the choices you have.',
        collectTitle: 'Information we collect',
        collect1: 'Contact details you submit (for example, name, phone number, email address, and message).',
        collect2: 'Business details you voluntarily share to request bookkeeping, tax, or administrative support.',
        collect3: 'Basic technical data (such as pages visited) for site functionality and security.',
        useTitle: 'How we use information',
        use1: 'To respond to requests and provide service-related support.',
        use2: 'To deliver service updates and reminders by email or SMS when you request or consent to that communication.',
        use3: 'To improve our service quality and maintain site security.',
        smsTitle: 'SMS communications (service-related)',
        sms1: 'If you provide your mobile number and opt in, we may send service-related text messages such as appointment coordination, document/status updates, and support follow‑ups. Message frequency varies. Message & data rates may apply.',
        sms2: 'You can opt out at any time by replying STOP. For help, reply HELP.',
        shareTitle: 'Sharing',
        share1: 'We do not sell your personal information. We do not share your phone number with third parties for their marketing. We may use trusted service providers (for example, messaging and hosting providers) only to operate our services, under confidentiality obligations.',
        securityTitle: 'Security',
        security1: 'We use reasonable administrative and technical safeguards to protect information. No method of transmission or storage is 100% secure.',
        choiceTitle: 'Your choices',
        choice1: 'Request access, correction, or deletion of information you submitted through our site.',
        choice2: 'Opt out of SMS by replying STOP; request help by replying HELP.',
        contactTitle: 'Contact',
        contact1: 'To contact us about privacy, please use the Contact form on our website.',
        back: 'Back to the main page',
      },
      policyTerms: {
        metaTitle: 'Terms & Conditions — Financial Stream LLC',
        h1: 'Terms & Conditions',
        updated: 'Last updated: 2026-02-08',
        intro: 'These Terms govern your use of the Financial Stream LLC website and our service-related communications. By using this site, you agree to these Terms.',
        servicesTitle: 'Services',
        services1: 'Financial Stream LLC provides bookkeeping, tax preparation support, and related administrative assistance. Information on this site is for general informational purposes and is not legal advice.',
        requestsTitle: 'Requests and consultations',
        requests1: 'When you submit a request, you agree that the information you provide is accurate to the best of your knowledge. We may contact you to clarify details needed to respond.',
        smsTitle: 'SMS terms (service-related)',
        sms1: 'If you opt in to receive texts, you consent to receive service-related SMS messages (not marketing) such as coordination, reminders, document/status updates, and support follow-ups. Message frequency varies. Message & data rates may apply.',
        sms2: 'To opt out, reply STOP. For help, reply HELP.',
        privacyTitle: 'Privacy',
        privacy1: 'Our Privacy Policy explains how we collect and use information. Please review it for details.',
        disclaimerTitle: 'Disclaimer',
        disclaimer1: 'We strive for accuracy, but we do not guarantee that all content is complete or up to date. Your use of this site is at your own risk.',
        changesTitle: 'Changes',
        changes1: 'We may update these Terms from time to time. Updates take effect when posted on this page.',
        back: 'Back to the main page',
      },
      
      footer: {
        rights: '© 2026 Financial Stream LLC',
        privacy: 'Privacy Policy',
        terms: 'Terms & Conditions',
      },
    },

    ru: {
      nav: {
        services: 'Услуги',
        process: 'Процесс',
        faq: 'Вопросы',
        contact: 'Контакты',
      },
      cta: {
        bookTop: 'Бесплатная консультация',
        seeServices: 'Смотреть услуги',
        ctaTitle: 'Готовы начать?',
        ctaText: 'Запишитесь на бесплатную консультацию или отправьте запрос — мы ответим в ближайшее время.',
        ctaButton: 'Записаться на бесплатную консультацию',
        sendRequest: 'Отправить',
        bookFooter: 'Записаться на бесплатную консультацию',
        bookMid: 'Записаться на бесплатную консультацию',
      },
      hero: {
        title1: 'Бухгалтерия и учёт',
        title2: 'для малого бизнеса и частных лиц',
        subtitle: 'Доверьте учёт и бумажную рутину профессионалам.',
        body: 'Financial Stream LLC помогает малому бизнесу и частным лицам держать финансы и документы под контролем. Мы ведём ежемесячный учёт в QuickBooks Online, помогаем по вопросам государственных департаментов (налоги с продаж, отчётность и т.п.), а также готовим и подаём налоговые декларации для бизнеса и физических лиц. Если вы открываете бизнес, нужно восстановить учёт за прошлые месяцы или подготовиться к концу года — мы всё структурируем и сделаем понятным. Большинство задач решаем онлайн или по телефону, поэтому приезжать в офис не нужно — работаем по всей США.',
        pillLang: 'Двуязычно: английский / русский',
        chip1: 'Быстрый ответ',
        chip2: 'Чистые ежемесячные отчёты',
        chip3: 'Фокус на QuickBooks',
      },
      pill: {
        lang: 'Два языка: Английский / Русский',
      },
      badges: {
        response: 'Быстрый ответ',
        reports: 'Понятные ежемесячные отчеты',
        us: 'Фокус на малом бизнесе США',
      },
      services: {
        title: 'Наши услуги',
        subtitle: 'Мы делаем свою работу быстро, качественно и профессионально.',
        s1: { b1: 'Регистрация/ликвидация компании', b2: 'Получение EIN', b3: 'Оформление бизнесс лицензии', b4: 'Оформление лицензии контрактора' },
        s2: { b1: 'Ведение бухгалтерского учета в QB. Профессиональная ежемесячная категоризация.' },
        s3: { b1: 'Подача ежемесячных и ежеквартальных отчетов в Department of Revenue , Sales Tax filing.' },
        s4: { b1: 'Расчет заработной платы и подача ежеквартальных отчетов в Department L& I' },
        s5: { b1: 'Подготовка и подача налоговых деклараций для бизнесса и частных лиц.' },
        s6: { b1: 'Анализ и консультация в финансовых вопросах и документах.' },
      },
      process: {
        title: 'Как мы работаем',
        subtitle: 'Простой процесс, который держит финансы под контролем.',
        p1: {
          title: 'Бесплатная консультация',
          text: 'Разбираем вашу ситуацию и согласуем объем работ.',
        },
        p2: {
          title: 'Безопасный старт',
          text: 'Собираем доступы и документы по понятным инструкциям.',
        },
        p3: {
          title: 'Ежемесячное закрытие',
          text: 'Сверки и порядок — стабильно и в срок.',
        },
      },
      reviews: {
        title: 'Отзывы клиентов',
        subtitle: 'Нам доверяют сотни клиентов — вот несколько коротких отзывов.',
        r1: { text: '“Четко, быстро и аккуратно. Наконец-то есть нормальные ежемесячные отчеты.”', name: 'Алексей' },
        r2: { text: '“Отличная коммуникация, все разложили по полочкам. Рекомендую.”', name: 'Ольга' },
        r3: { text: '“Помогли исправить ошибки прошлого бухгалтера и настроили учет правильно.”', name: 'Светлана' },
        r4: { text: '“Профессионально и быстро отвечают — именно то, что нужно малому бизнесу.”', name: 'Виктор' },
        r5: { text: '“Очень внимательный подход. Все вовремя и без стресса.”', name: 'Татьяна' },
      },
monthly: {
      title: 'Что вы получаете каждый месяц',
      b1: 'Сверенные банковские счета и карты',
      b2: 'Чистая категоризация в QuickBooks Online',
      b3: 'P&L и Balance Sheet каждый месяц',
      b4: 'Пояснения: что изменилось и на что обратить внимание',
      b5: 'Быстрые ответы на вопросы по учёту',
      },
      
      faq: {
        title: 'Вопросы и ответы',
        subtitle: 'Коротко отвечаем на самые частые вопросы.',
        q1: { q: 'Что нужно от меня, чтобы начать?', a: 'Мы уточним несколько вопросов и запросим доступ к бухгалтерской системе и ключевые документы.' },
        q2: { q: 'Нужно ли приезжать к вам в офис лично?', a: 'Нет. Мы можем работать полностью онлайн или по телефону — приезжать не нужно. Работаем с клиентами по всей США.' },
        q3: { q: 'Вы работаете с QuickBooks Online?', a: 'Да. QuickBooks Online — наша основная платформа, и мы поможем настроить всё правильно.' },
        q4: { q: 'Можете восстановить учёт за прошлые месяцы?', a: 'Да. Мы сделаем catch-up, исправим категории и переведём на стабильный ежемесячный процесс.' },
        q5: { q: 'Вы помогаете с sales tax?', a: 'Да. Помогаем с учётом, подачей и уведомлениями по вашему штату.' },
        q6: { q: 'Помогаете по вопросам департаментов штата (налоги/труд)?', a: 'Да. Отчётность, уведомления, документы и коммуникация — чтобы вы соблюдали требования.' },
        q7: { q: 'Вы делаете налоги?', a: 'Да. Готовим и подаём бизнес- и личные декларации и помогаем держать документы в порядке весь год.' },
        q8: { q: 'Как быстро вы отвечаете?', a: 'Обычно в течение 1 рабочего дня. Сложные случаи могут занять больше времени — мы будем держать вас в курсе.' },
        q9: { q: 'Сколько это стоит?', a: 'Стоимость зависит от объёма и сложности. Мы дадим расчёт после короткого созвона.' },
      },
      contact: {
        title: 'Контакты',
        subtitle: 'Напишите, что нужно — мы ответим в ближайшее время.',
        formTitle: 'Записаться на бесплатную консультацию или задать вопрос',
        formSub: 'Задать вопрос — мы ответим в ближайшее время.',
        phone: 'Телефон',
        email: 'Email',
        website: 'Сайт',
      
        location: 'Локация',
        locationValue: 'Работаем с клиентами онлайн по всей территории США. Базируемся в Federal Way, Washington.',},
      form: {
        success: 'Спасибо — ваш запрос отправлен.',
        nameLabel: 'Имя',
        phoneLabel: 'Телефон',
        emailLabel: 'Email',
        messageLabel: 'Сообщение',
        namePlaceholder: 'Ваше имя',
        phonePlaceholder: 'Номер телефона',
        emailPlaceholder: 'Email',
        messagePlaceholder: 'Чем можем помочь?',
        thanksTitle: 'Спасибо!',
        thanksBody: 'Ваш запрос отправлен. Мы свяжемся с вами в ближайшее время.',
      },
      
      policyPrivacy: {
        metaTitle: 'Политика конфиденциальности — Financial Stream LLC',
        h1: 'Политика конфиденциальности',
        updated: 'Последнее обновление: 2026-02-08',
        intro: 'Financial Stream LLC уважает вашу конфиденциальность. В этой политике описано, какие данные мы собираем, как используем их и какие у вас есть варианты выбора.',
        collectTitle: 'Какие данные мы собираем',
        collect1: 'Контактные данные, которые вы отправляете (например: имя, телефон, email и сообщение).',
        collect2: 'Данные о бизнесе, которые вы добровольно предоставляете для запроса бухгалтерских, налоговых или административных услуг.',
        collect3: 'Базовые технические данные (например посещённые страницы) для работы сайта и безопасности.',
        useTitle: 'Как мы используем данные',
        use1: 'Чтобы отвечать на запросы и оказывать сервисную поддержку.',
        use2: 'Чтобы отправлять сервисные обновления и напоминания по email или SMS — когда вы сами запросили или дали согласие.',
        use3: 'Чтобы улучшать качество сервиса и обеспечивать безопасность сайта.',
        smsTitle: 'SMS‑сообщения (только сервисные)',
        sms1: 'Если вы оставили номер и согласились, мы можем отправлять сервисные SMS: согласование консультации, обновления по документам/статусам, ответы поддержки. Частота сообщений может различаться. Возможны стандартные тарифы оператора.',
        sms2: 'Отписаться можно в любой момент, ответив STOP. Для помощи — ответьте HELP.',
        shareTitle: 'Передача данных',
        share1: 'Мы не продаём персональные данные. Мы не передаём ваш номер телефона третьим лицам для их маркетинга. Для работы сервиса мы можем использовать надёжных подрядчиков (например, провайдера сообщений и хостинг) на условиях конфиденциальности.',
        securityTitle: 'Безопасность',
        security1: 'Мы применяем разумные организационные и технические меры защиты. Однако ни один способ передачи/хранения данных не гарантирует 100% безопасность.',
        choiceTitle: 'Ваш выбор',
        choice1: 'Вы можете запросить доступ, исправление или удаление данных, которые вы отправляли через сайт.',
        choice2: 'Отписка от SMS — STOP; помощь — HELP.',
        contactTitle: 'Контакты',
        contact1: 'По вопросам конфиденциальности используйте форму Contact на нашем сайте.',
        back: 'Вернуться на главную',
      },
      policyTerms: {
        metaTitle: 'Условия использования — Financial Stream LLC',
        h1: 'Условия использования',
        updated: 'Последнее обновление: 2026-02-08',
        intro: 'Эти условия регулируют использование сайта Financial Stream LLC и сервисных коммуникаций. Используя сайт, вы соглашаетесь с этими условиями.',
        servicesTitle: 'Услуги',
        services1: 'Financial Stream LLC предоставляет бухгалтерские услуги, поддержку по налоговой подготовке и сопутствующую административную помощь. Информация на сайте носит общий характер и не является юридической консультацией.',
        requestsTitle: 'Запросы и консультации',
        requests1: 'Отправляя запрос, вы подтверждаете, что предоставляете информацию добросовестно и по возможности точно. При необходимости мы можем уточнить детали для ответа.',
        smsTitle: 'Условия по SMS (только сервисные)',
        sms1: 'Если вы подписались на SMS, вы даёте согласие на сервисные сообщения (не маркетинг): согласование, напоминания, обновления по документам/статусам и ответы поддержки. Частота сообщений может различаться. Возможны тарифы оператора.',
        sms2: 'Отписка — STOP. Помощь — HELP.',
        privacyTitle: 'Конфиденциальность',
        privacy1: 'Подробности о сборе и использовании данных описаны в Политике конфиденциальности.',
        disclaimerTitle: 'Отказ от гарантий',
        disclaimer1: 'Мы стараемся поддерживать информацию актуальной, но не гарантируем полноту и актуальность всего контента. Использование сайта — на ваш риск.',
        changesTitle: 'Изменения',
        changes1: 'Мы можем обновлять эти условия. Изменения вступают в силу после публикации на этой странице.',
        back: 'Вернуться на главную',
      },
      
      footer: {
        rights: '© 2026 Financial Stream LLC',
        privacy: 'Политика конфиденциальности',
        terms: 'Условия использования',
      },
    },
  };

  const getNested = (obj, path) => path.split('.').reduce((o, k) => (o && k in o ? o[k] : undefined), obj);

  function setLanguage(lang) {
    if (!i18n[lang]) return;

    // Text content
    document.querySelectorAll('[data-i18n]').forEach((el) => {
      const key = el.getAttribute('data-i18n');
      const value = getNested(i18n[lang], key);
      if (typeof value === 'string') {
        el.textContent = value;
      }
    });

    // Placeholders
    document.querySelectorAll('[data-i18n-placeholder]').forEach((el) => {
      const key = el.getAttribute('data-i18n-placeholder');
      const value = getNested(i18n[lang], key);
      if (typeof value === 'string') {
        el.setAttribute('placeholder', value);
      }
    });

    // Reviews cards
    for (let i = 1; i <= 5; i++) {
      const t = getNested(i18n[lang], `reviews.r${i}.text`);
      const n = getNested(i18n[lang], `reviews.r${i}.name`);
      const tEl = document.querySelector(`[data-i18n="reviews.r${i}.text"]`);
      const nEl = document.querySelector(`[data-i18n="reviews.r${i}.name"]`);
      if (tEl && typeof t === 'string') tEl.textContent = t;
      if (nEl && typeof n === 'string') nEl.textContent = n;
    }

    // Active state
    document.querySelectorAll('.lang__btn').forEach((btn) => {
      const isActive = btn.getAttribute('data-lang') === lang;
      btn.setAttribute('aria-pressed', isActive ? 'true' : 'false');
    });

    // Store
    localStorage.setItem('fs_lang', lang);
    document.documentElement.setAttribute('lang', lang);

    // Hidden language field for Formspree (optional)
    const formLang = document.getElementById('formLang');
    if (formLang) formLang.value = lang;
  }

  // Hook language buttons
  document.querySelectorAll('.lang__btn').forEach((btn) => {
    btn.addEventListener('click', () => setLanguage(btn.getAttribute('data-lang')));
  });

  // Init language
  const saved = localStorage.getItem('fs_lang');
  const initial = saved ? saved : (((navigator.language || '').toLowerCase().startsWith('ru')) ? 'ru' : 'en');
  setLanguage(initial);

  // Simple success message based on URL param (?sent=1)
  try {
    const params = new URLSearchParams(window.location.search);
    if (params.get('success') === '1') {
      const t = document.getElementById('formSuccess');
      if (t) t.style.display = 'block';
      // Remove the param from URL (optional, no reload)
      params.delete('success');
      const clean = `${window.location.pathname}${params.toString() ? '?' + params.toString() : ''}${window.location.hash || ''}`;
      window.history.replaceState({}, '', clean);
    }
  } catch (_) {
    // no-op
  }
})();
