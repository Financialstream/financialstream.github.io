(() => {
  const i18n = {
    en: {
      nav: {
        services: 'Services',
        process: 'Process',
        faq: 'FAQ',
        contact: 'Contact',
      },
      cta: {
        bookTop: 'Book a Free Consultation',
        seeServices: 'See services',
        ctaTitle: 'Ready to get started?',
        ctaText: 'Book a free consultation or send a request — we’ll reply shortly.',
        ctaButton: 'Request a Free Consultation',
        sendRequest: 'Send Request',
        bookFooter: 'Request a Free Consultation',
        bookMid: 'Request a Free Consultation',
      },
      hero: {
        title1: 'Accounting & Bookkeeping',
        title2: 'for Small Businesses & Individuals',
        subtitle: 'Monthly bookkeeping, tax preparation, and clean reporting — built for clarity, not chaos.',
        body: 'Financial Stream LLC provides practical accounting and bookkeeping support for small businesses and individuals. We help with business formation and closure, day‑to‑day bookkeeping in QuickBooks, and accurate monthly reporting. We also assist with sales tax and compliance communication with agencies like the Department of Revenue and L&I, and we prepare and file both business and personal tax returns. Our focus is financial clarity and clean documentation — the foundation for running a successful business.',
        pillLang: 'Bilingual: English / Russian',
        chip1: 'Fast response',
        chip2: 'Clean monthly reports',
        chip3: 'US small-business focused',

      },
      pill: {
        lang: 'Bilingual: English / Russian',
      },
      badges: {
        response: 'Fast response',
        reports: 'Clean monthly reports',
        us: 'US small-business focused',
      },
      services: {
        title: 'Our Services',
        subtitle: 'Clear scope, predictable workflow, and clean deliverables.',
        s1: { title: 'Bookkeeping (QuickBooks)', text: 'Ongoing bookkeeping in QuickBooks, reconciliations, and organized records.' },
        s2: { title: 'Sales Tax Support', text: 'Sales tax tracking, filings, and compliance support with the Department of Revenue.' },
        s3: { title: 'L&I Compliance Support', text: 'Help with L&I correspondence and required reporting so you stay compliant.' },
        s4: { title: 'Business Tax Returns', text: 'Preparation and filing of business tax returns with clean documentation.' },
        s5: { title: 'Personal Tax Returns', text: 'Preparation and filing of personal tax returns with clear guidance and accuracy.' },
        s6: { title: 'Business Formation & Closure', text: 'Support for opening or closing a business — paperwork, setup basics, and next steps.' },
      },
      process: {
        title: 'How it works',
        subtitle: 'A simple flow that keeps finances under control.',
        p1: {
          title: 'Free consultation',
          text: 'We understand your situation and confirm scope.',
        },
        p2: {
          title: 'Secure onboarding',
          text: 'We collect access and documents with clear instructions.',
        },
        p3: {
          title: 'Monthly close',
          text: 'Reconciliations and cleanup — consistent and on time.',
        },
      },
      reviews: {
        title: 'Client reviews',
        subtitle: 'Hundreds of clients trust us — here are a few notes.',
        r1: { text: '“Clear, fast, and accurate. We finally have clean monthly reports.”', name: 'Alex' },
        r2: { text: '“Great communication and everything is organized. Highly recommend.”', name: 'Olga' },
        r3: { text: '“They helped me fix issues from the previous bookkeeper and set everything up correctly.”', name: 'Svetlana' },
        r4: { text: '“Professional service and quick answers — exactly what a small business needs.”', name: 'Viktor' },
        r5: { text: '“Very attentive approach. Everything is on time and stress‑free.”', name: 'Tetiana' },
      },
      faq: {
        title: 'FAQ',
        subtitle: 'Answers to common questions.',
        q1: { q: 'Do you work with both individuals and businesses?', a: 'Yes. We support individuals, freelancers, and small businesses across the US.' },
        q2: { q: 'Which software do you use?', a: 'We work with QuickBooks and Xero, depending on your needs and current setup.' },
        q3: { q: 'How fast can we start?', a: 'Often within a few days after the initial call and access collection.' },
        q4: { q: 'Can you help with past‑due bookkeeping?', a: 'Yes. We can clean up and catch up past periods, then move to monthly support.' },
      },
      contact: {
        title: 'Contact',
        subtitle: 'Tell us what you need — we’ll reply shortly.',
        formTitle: 'Request a free consultation',
        formSub: 'Ask a question — we’ll reply shortly.',
        phone: 'Phone',
        email: 'Email',
        website: 'Website',
      },
      form: {
        success: 'Thank you — your request was sent.',
        nameLabel: 'Your Name',
        phoneLabel: 'Phone Number',
        emailLabel: 'Email',
        messageLabel: 'Message',
        namePlaceholder: 'Your Name',
        phonePlaceholder: 'Phone Number',
        emailPlaceholder: 'Email',
        messagePlaceholder: 'How can we help?',
        thanksTitle: 'Thank you!',
        thanksBody: 'Your request has been sent. We will contact you shortly.',
      },
      
      policyPrivacy: {
        metaTitle: 'Privacy Policy — Financial Stream LLC',
        h1: 'Privacy Policy',
        updated: 'Last updated: 2026-02-08',
        intro: 'Financial Stream LLC respects your privacy. This Privacy Policy explains what information we collect, how we use it, and the choices you have.',
        collectTitle: 'Information we collect',
        collect1: 'Contact details you submit (for example, name, phone number, email address, and message).',
        collect2: 'Business details you voluntarily share to request bookkeeping, tax, or administrative support.',
        collect3: 'Basic technical data (such as pages visited) for site functionality and security.',
        useTitle: 'How we use information',
        use1: 'To respond to requests and provide service-related support.',
        use2: 'To deliver service updates and reminders by email or SMS when you request or consent to that communication.',
        use3: 'To improve our service quality and maintain site security.',
        smsTitle: 'SMS communications (service-related)',
        sms1: 'If you provide your mobile number and opt in, we may send service-related text messages such as appointment coordination, document/status updates, and support follow‑ups. Message frequency varies. Message & data rates may apply.',
        sms2: 'You can opt out at any time by replying STOP. For help, reply HELP.',
        shareTitle: 'Sharing',
        share1: 'We do not sell your personal information. We do not share your phone number with third parties for their marketing. We may use trusted service providers (for example, messaging and hosting providers) only to operate our services, under confidentiality obligations.',
        securityTitle: 'Security',
        security1: 'We use reasonable administrative and technical safeguards to protect information. No method of transmission or storage is 100% secure.',
        choiceTitle: 'Your choices',
        choice1: 'Request access, correction, or deletion of information you submitted through our site.',
        choice2: 'Opt out of SMS by replying STOP; request help by replying HELP.',
        contactTitle: 'Contact',
        contact1: 'To contact us about privacy, please use the Contact form on our website.',
        back: 'Back to the main page',
      },
      policyTerms: {
        metaTitle: 'Terms & Conditions — Financial Stream LLC',
        h1: 'Terms & Conditions',
        updated: 'Last updated: 2026-02-08',
        intro: 'These Terms govern your use of the Financial Stream LLC website and our service-related communications. By using this site, you agree to these Terms.',
        servicesTitle: 'Services',
        services1: 'Financial Stream LLC provides bookkeeping, tax preparation support, and related administrative assistance. Information on this site is for general informational purposes and is not legal advice.',
        requestsTitle: 'Requests and consultations',
        requests1: 'When you submit a request, you agree that the information you provide is accurate to the best of your knowledge. We may contact you to clarify details needed to respond.',
        smsTitle: 'SMS terms (service-related)',
        sms1: 'If you opt in to receive texts, you consent to receive service-related SMS messages (not marketing) such as coordination, reminders, document/status updates, and support follow-ups. Message frequency varies. Message & data rates may apply.',
        sms2: 'To opt out, reply STOP. For help, reply HELP.',
        privacyTitle: 'Privacy',
        privacy1: 'Our Privacy Policy explains how we collect and use information. Please review it for details.',
        disclaimerTitle: 'Disclaimer',
        disclaimer1: 'We strive for accuracy, but we do not guarantee that all content is complete or up to date. Your use of this site is at your own risk.',
        changesTitle: 'Changes',
        changes1: 'We may update these Terms from time to time. Updates take effect when posted on this page.',
        back: 'Back to the main page',
      },
      
      footer: {
        rights: '© 2026 Financial Stream LLC',
        privacy: 'Privacy Policy',
        terms: 'Terms & Conditions',
      },
    },

    ru: {
      nav: {
        services: 'Услуги',
        process: 'Процесс',
        faq: 'Вопросы',
        contact: 'Контакты',
      },
      cta: {
        bookTop: 'Бесплатная консультация',
        seeServices: 'Смотреть услуги',
        ctaTitle: 'Готовы начать?',
        ctaText: 'Запишитесь на бесплатную консультацию или отправьте запрос — мы ответим в ближайшее время.',
        ctaButton: 'Записаться на бесплатную консультацию',
        sendRequest: 'Отправить',
        bookFooter: 'Записаться на бесплатную консультацию',
        bookMid: 'Записаться на бесплатную консультацию',
      },
      hero: {
        title1: 'Бухгалтерия и учет',
        title2: 'для малого бизнеса и частных лиц',
        subtitle: 'Ежемесячный учет, налоги и понятные отчеты — для ясности, а не хаоса.',
        body: 'Financial Stream LLC помогает малому бизнесу и частным лицам навести порядок в финансах и документах. Мы сопровождаем открытие и закрытие бизнеса, ведём учёт в QuickBooks, закрываем месяц и готовим понятные отчёты. Помогаем с sales tax и коммуникацией с Department of Revenue и L&I, а также готовим и подаём налоговые декларации для бизнеса и физических лиц. Наш фокус — финансовая грамотность и порядок в документах как основа успешного бизнеса.',
        pillLang: 'Два языка: Английский / Русский',
        chip1: 'Быстрый ответ',
        chip2: 'Понятные ежемесячные отчеты',
        chip3: 'Фокус на малом бизнесе США',

      },
      pill: {
        lang: 'Два языка: Английский / Русский',
      },
      badges: {
        response: 'Быстрый ответ',
        reports: 'Понятные ежемесячные отчеты',
        us: 'Фокус на малом бизнесе США',
      },
      services: {
        title: 'Наши услуги',
        subtitle: 'Понятный объем работ, предсказуемый процесс и чистый результат.',
        s1: { title: 'Bookkeeping в QuickBooks', text: 'Ведение учёта в QuickBooks, сверки и порядок в документах.' },
        s2: { title: 'Sales Tax и Department of Revenue', text: 'Sales tax: учёт, подачи и помощь во взаимодействии с Department of Revenue.' },
        s3: { title: 'Поддержка по L&I', text: 'Помощь с письмами и требованиями L&I, чтобы вы оставались compliant.' },
        s4: { title: 'Налоги для бизнеса', text: 'Подготовка и подача business tax returns с чистыми документами.' },
        s5: { title: 'Личные налоги', text: 'Подготовка и подача personal tax returns — точно и понятно.' },
        s6: { title: 'Открытие и закрытие бизнеса', text: 'Сопровождение регистрации и закрытия бизнеса, базовые шаги и документы.' },
      },
      process: {
        title: 'Как мы работаем',
        subtitle: 'Простой процесс, который держит финансы под контролем.',
        p1: {
          title: 'Бесплатная консультация',
          text: 'Разбираем вашу ситуацию и согласуем объем работ.',
        },
        p2: {
          title: 'Безопасный старт',
          text: 'Собираем доступы и документы по понятным инструкциям.',
        },
        p3: {
          title: 'Ежемесячное закрытие',
          text: 'Сверки и порядок — стабильно и в срок.',
        },
      },
      reviews: {
        title: 'Отзывы клиентов',
        subtitle: 'Нам доверяют сотни клиентов — вот несколько коротких отзывов.',
        r1: { text: '“Четко, быстро и аккуратно. Наконец-то есть нормальные ежемесячные отчеты.”', name: 'Алексей' },
        r2: { text: '“Отличная коммуникация, все разложили по полочкам. Рекомендую.”', name: 'Ольга' },
        r3: { text: '“Помогли исправить ошибки прошлого бухгалтера и настроили учет правильно.”', name: 'Светлана' },
        r4: { text: '“Профессионально и быстро отвечают — именно то, что нужно малому бизнесу.”', name: 'Виктор' },
        r5: { text: '“Очень внимательный подход. Все вовремя и без стресса.”', name: 'Татьяна' },
      },
      faq: {
        title: 'Частые вопросы',
        subtitle: 'Короткие ответы на популярные вопросы.',
        q1: { q: 'Вы работаете и с частными лицами, и с бизнесом?', a: 'Да. Мы работаем с физлицами, фрилансерами и малым бизнесом по США.' },
        q2: { q: 'С какими программами вы работаете?', a: 'Чаще всего QuickBooks и Xero — в зависимости от вашей ситуации.' },
        q3: { q: 'Как быстро можно начать?', a: 'Обычно — в течение нескольких дней после созвона и получения доступов.' },
        q4: { q: 'Можете ли вы “догнать” прошлые месяцы?', a: 'Да. Мы делаем cleanup/catch‑up и затем переходим на ежемесячное сопровождение.' },
      },
      contact: {
        title: 'Контакты',
        subtitle: 'Напишите, что нужно — мы ответим в ближайшее время.',
        formTitle: 'Записаться на бесплатную консультацию',
        formSub: 'Задать вопрос — мы ответим в ближайшее время.',
        phone: 'Телефон',
        email: 'Email',
        website: 'Сайт',
      },
      form: {
        success: 'Спасибо — ваш запрос отправлен.',
        nameLabel: 'Имя',
        phoneLabel: 'Телефон',
        emailLabel: 'Email',
        messageLabel: 'Сообщение',
        namePlaceholder: 'Ваше имя',
        phonePlaceholder: 'Номер телефона',
        emailPlaceholder: 'Email',
        messagePlaceholder: 'Чем можем помочь?',
        thanksTitle: 'Спасибо!',
        thanksBody: 'Ваш запрос отправлен. Мы свяжемся с вами в ближайшее время.',
      },
      
      policyPrivacy: {
        metaTitle: 'Политика конфиденциальности — Financial Stream LLC',
        h1: 'Политика конфиденциальности',
        updated: 'Последнее обновление: 2026-02-08',
        intro: 'Financial Stream LLC уважает вашу конфиденциальность. В этой политике описано, какие данные мы собираем, как используем их и какие у вас есть варианты выбора.',
        collectTitle: 'Какие данные мы собираем',
        collect1: 'Контактные данные, которые вы отправляете (например: имя, телефон, email и сообщение).',
        collect2: 'Данные о бизнесе, которые вы добровольно предоставляете для запроса бухгалтерских, налоговых или административных услуг.',
        collect3: 'Базовые технические данные (например посещённые страницы) для работы сайта и безопасности.',
        useTitle: 'Как мы используем данные',
        use1: 'Чтобы отвечать на запросы и оказывать сервисную поддержку.',
        use2: 'Чтобы отправлять сервисные обновления и напоминания по email или SMS — когда вы сами запросили или дали согласие.',
        use3: 'Чтобы улучшать качество сервиса и обеспечивать безопасность сайта.',
        smsTitle: 'SMS‑сообщения (только сервисные)',
        sms1: 'Если вы оставили номер и согласились, мы можем отправлять сервисные SMS: согласование консультации, обновления по документам/статусам, ответы поддержки. Частота сообщений может различаться. Возможны стандартные тарифы оператора.',
        sms2: 'Отписаться можно в любой момент, ответив STOP. Для помощи — ответьте HELP.',
        shareTitle: 'Передача данных',
        share1: 'Мы не продаём персональные данные. Мы не передаём ваш номер телефона третьим лицам для их маркетинга. Для работы сервиса мы можем использовать надёжных подрядчиков (например, провайдера сообщений и хостинг) на условиях конфиденциальности.',
        securityTitle: 'Безопасность',
        security1: 'Мы применяем разумные организационные и технические меры защиты. Однако ни один способ передачи/хранения данных не гарантирует 100% безопасность.',
        choiceTitle: 'Ваш выбор',
        choice1: 'Вы можете запросить доступ, исправление или удаление данных, которые вы отправляли через сайт.',
        choice2: 'Отписка от SMS — STOP; помощь — HELP.',
        contactTitle: 'Контакты',
        contact1: 'По вопросам конфиденциальности используйте форму Contact на нашем сайте.',
        back: 'Вернуться на главную',
      },
      policyTerms: {
        metaTitle: 'Условия использования — Financial Stream LLC',
        h1: 'Условия использования',
        updated: 'Последнее обновление: 2026-02-08',
        intro: 'Эти условия регулируют использование сайта Financial Stream LLC и сервисных коммуникаций. Используя сайт, вы соглашаетесь с этими условиями.',
        servicesTitle: 'Услуги',
        services1: 'Financial Stream LLC предоставляет бухгалтерские услуги, поддержку по налоговой подготовке и сопутствующую административную помощь. Информация на сайте носит общий характер и не является юридической консультацией.',
        requestsTitle: 'Запросы и консультации',
        requests1: 'Отправляя запрос, вы подтверждаете, что предоставляете информацию добросовестно и по возможности точно. При необходимости мы можем уточнить детали для ответа.',
        smsTitle: 'Условия по SMS (только сервисные)',
        sms1: 'Если вы подписались на SMS, вы даёте согласие на сервисные сообщения (не маркетинг): согласование, напоминания, обновления по документам/статусам и ответы поддержки. Частота сообщений может различаться. Возможны тарифы оператора.',
        sms2: 'Отписка — STOP. Помощь — HELP.',
        privacyTitle: 'Конфиденциальность',
        privacy1: 'Подробности о сборе и использовании данных описаны в Политике конфиденциальности.',
        disclaimerTitle: 'Отказ от гарантий',
        disclaimer1: 'Мы стараемся поддерживать информацию актуальной, но не гарантируем полноту и актуальность всего контента. Использование сайта — на ваш риск.',
        changesTitle: 'Изменения',
        changes1: 'Мы можем обновлять эти условия. Изменения вступают в силу после публикации на этой странице.',
        back: 'Вернуться на главную',
      },
      
      footer: {
        rights: '© 2026 Financial Stream LLC',
        privacy: 'Политика конфиденциальности',
        terms: 'Условия использования',
      },
    },
  };

  const getNested = (obj, path) => path.split('.').reduce((o, k) => (o && k in o ? o[k] : undefined), obj);

  function setLanguage(lang) {
    if (!i18n[lang]) return;

    // Text content
    document.querySelectorAll('[data-i18n]').forEach((el) => {
      const key = el.getAttribute('data-i18n');
      const value = getNested(i18n[lang], key);
      if (typeof value === 'string') {
        el.textContent = value;
      }
    });

    // Placeholders
    document.querySelectorAll('[data-i18n-placeholder]').forEach((el) => {
      const key = el.getAttribute('data-i18n-placeholder');
      const value = getNested(i18n[lang], key);
      if (typeof value === 'string') {
        el.setAttribute('placeholder', value);
      }
    });

    // Reviews cards
    for (let i = 1; i <= 5; i++) {
      const t = getNested(i18n[lang], `reviews.r${i}.text`);
      const n = getNested(i18n[lang], `reviews.r${i}.name`);
      const tEl = document.querySelector(`[data-i18n="reviews.r${i}.text"]`);
      const nEl = document.querySelector(`[data-i18n="reviews.r${i}.name"]`);
      if (tEl && typeof t === 'string') tEl.textContent = t;
      if (nEl && typeof n === 'string') nEl.textContent = n;
    }

    // Active state
    document.querySelectorAll('.lang__btn').forEach((btn) => {
      const isActive = btn.getAttribute('data-lang') === lang;
      btn.setAttribute('aria-pressed', isActive ? 'true' : 'false');
    });

    // Store
    localStorage.setItem('fs_lang', lang);
    document.documentElement.setAttribute('lang', lang);

    // Hidden language field for Formspree (optional)
    const formLang = document.getElementById('formLang');
    if (formLang) formLang.value = lang;
  }

  // Hook language buttons
  document.querySelectorAll('.lang__btn').forEach((btn) => {
    btn.addEventListener('click', () => setLanguage(btn.getAttribute('data-lang')));
  });

  // Init language
  const saved = localStorage.getItem('fs_lang');
  const initial = saved ? saved : (((navigator.language || '').toLowerCase().startsWith('ru')) ? 'ru' : 'en');
  setLanguage(initial);

  // Simple success message based on URL param (?sent=1)
  try {
    const params = new URLSearchParams(window.location.search);
    if (params.get('success') === '1') {
      const t = document.getElementById('formSuccess');
      if (t) t.style.display = 'block';
      // Remove the param from URL (optional, no reload)
      params.delete('success');
      const clean = `${window.location.pathname}${params.toString() ? '?' + params.toString() : ''}${window.location.hash || ''}`;
      window.history.replaceState({}, '', clean);
    }
  } catch (_) {
    // no-op
  }
})();
